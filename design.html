<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Light weight, baby! — Squat · Bench · Deadlift</title>
  <style>
    :root{ --bg:#0b0f14; --panel:#121821; --muted:#8aa0b2; --ink:#e7f0f7; --accent:#5cc8ff; --accent2:#7affae; --warn:#ffb36b; --danger:#ff6b7a; --grid:#1a2330; --bar:#c7d7e6; }
    *{box-sizing:border-box}
    body{margin:0;font-family:sans-serif; background:var(--bg); color:var(--ink)}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    h1{margin:0 0 12px 0;}
    .stage{position:relative;min-height:500px;background:#0e1520;border-radius:14px;overflow:hidden;margin-bottom:12px}
    .svg{position:absolute;inset:0}
    .bar{stroke:var(--bar);stroke-width:10;stroke-linecap:round}
    .loa{stroke:var(--accent);stroke-width:2;stroke-dasharray:6 6}
    .joint{fill:#d7e7f5}
    .segment{stroke:#99b6cf;stroke-width:4}
    .controls button{margin-right:8px;margin-bottom:6px;padding:8px 14px;border:none;border-radius:6px;background:#223344;color:#fff;cursor:pointer}
    .controls button:hover{background:#335577}
  </style>
</head>
<body>
<div class="wrap">
  <h1>Light weight, baby!</h1>
  <p>Interactive torque physics illustrations for the Big 3: squat, bench, and deadlift. Inspired by Ronnie Coleman’s cry and coached in Pavel Tsatsouline’s voice, comrade.</p>
  <div class="stage">
    <svg class="svg" viewBox="0 0 800 560">
      <g id="viz"></g>
    </svg>
  </div>
  <div class="controls">
    <button onclick="toggleAnim('squat')">Play Squat</button>
    <button onclick="toggleAnim('bench')">Play Bench</button>
    <button onclick="toggleAnim('deadlift')">Play Deadlift</button>
    <button onclick="stopAnim()">Stop</button>
  </div>
</div>
<script>
const g=9.81,pxPerCm=4,originY=500;let anim={squat:false,bench:false,deadlift:false},raf;
function cmToPx(cm){return cm*pxPerCm;}
function line(x1,y1,x2,y2,cls){return `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" class="${cls}"/>`;}
function circle(cx,cy,r,cls){return `<circle cx="${cx}" cy="${cy}" r="${r}" class="${cls}"/>`;}
function cycle(t,period=2){return 0.5*(1-Math.cos((2*Math.PI/period)*t));}

// === Squat ===
const SQ_LEN={torso:45,thigh:40,shin:42};
function drawSquat(p){
  const barX=400,footX=400,footY=originY;
  const kneeFwd=cmToPx(10*(1-p)+2*p);
  const hipBack=cmToPx(22*(1-p)+10*p);
  const barGap=cmToPx(2);
  const Ls=cmToPx(SQ_LEN.shin),Lt=cmToPx(SQ_LEN.thigh),Ltor=cmToPx(SQ_LEN.torso);
  const kneeX=footX+kneeFwd;
  const kneeY=footY-Math.sqrt(Math.max(Ls*Ls-kneeFwd*kneeFwd,0));
  let hipX=barX-hipBack;
  let dxh=hipX-kneeX;let hipY=kneeY-Math.sqrt(Math.max(Lt*Lt-dxh*dxh,0));
  const dxs=barX+barGap-hipX;const shoulderX=hipX+dxs;const shoulderY=hipY-Math.sqrt(Math.max(Ltor*Ltor-dxs*dxs,0));
  const barY=shoulderY;
  const svg=[line(barX-90,barY,barX+90,barY,'bar'),line(barX,40,barX,560,'loa'),line(hipX,hipY,shoulderX,shoulderY,'segment'),line(kneeX,kneeY,hipX,hipY,'segment'),line(footX,footY,kneeX,kneeY,'segment'),circle(shoulderX,shoulderY,6,'joint'),circle(hipX,hipY,6,'joint'),circle(kneeX,kneeY,6,'joint'),circle(footX,footY,6,'joint')];
  document.getElementById('viz').innerHTML=svg.join('');
}

// === Bench ===
function drawBench(p){
  const cx=400,cy=320,grip=cmToPx(55);
  const halfGrip=grip/2;
  const barY=cy+cmToPx(7)-cmToPx(22*p);
  const bar=[line(cx-halfGrip,barY,cx+halfGrip,barY,'bar'),line(cx,40,cx,560,'loa')];
  const fore=cmToPx(28),hum=cmToPx(30);
  const lhx=cx-halfGrip,rhx=cx+halfGrip,hy=barY;
  const lex=lhx,rex=rhx,ey=hy+fore;
  const lsx=cx-cmToPx(20),rsx=cx+cmToPx(20);
  const lsy=ey-hum,rsy=ey-hum;
  const svg=[...bar,line(lsx,lsy,lex,ey,'segment'),line(lex,ey,lhx,hy,'segment'),circle(lsx,lsy,6,'joint'),circle(lex,ey,6,'joint'),line(rsx,rsy,rex,ey,'segment'),line(rex,ey,rhx,hy,'segment'),circle(rsx,rsy,6,'joint'),circle(rex,ey,6,'joint')];
  document.getElementById('viz').innerHTML=svg.join('');
}

// === Deadlift ===
const DL_LEN={torso:45,thigh:40,shin:42,arm:70};
function drawDead(p){
  const barX=400,footX=400,footY=originY;
  const barY=originY-(20+180*p);
  const arm=cmToPx(DL_LEN.arm),tor=cmToPx(DL_LEN.torso),th=cmToPx(DL_LEN.thigh),sh=cmToPx(DL_LEN.shin);
  const shoulderX=barX+cmToPx(6);
  const shoulderY=barY-Math.sqrt(Math.max(arm*arm-(shoulderX-barX)*(shoulderX-barX),0));
  const hipX=barX-cmToPx(24);
  const hipY=shoulderY+Math.sqrt(Math.max(tor*tor-(shoulderX-hipX)*(shoulderX-hipX),0));
  const kneeX=barX+cmToPx(2);
  const kneeY=footY-Math.sqrt(Math.max(sh*sh-cmToPx(2)*cmToPx(2),0));
  const svg=[line(barX-90,barY,barX+90,barY,'bar'),line(barX,40,barX,560,'loa'),line(footX,footY,kneeX,kneeY,'segment'),line(kneeX,kneeY,hipX,hipY,'segment'),line(hipX,hipY,shoulderX,shoulderY,'segment'),circle(footX,footY,6,'joint'),circle(kneeX,kneeY,6,'joint'),circle(hipX,hipY,6,'joint'),circle(shoulderX,shoulderY,6,'joint')];
  document.getElementById('viz').innerHTML=svg.join('');
}

// anim
let t0=null;
function toggleAnim(kind){
  anim={squat:false,bench:false,deadlift:false};
  anim[kind]=true;
  if(anim[kind]&&!raf){t0=null;raf=requestAnimationFrame(loop);}
}
function stopAnim(){anim={squat:false,bench:false,deadlift:false};if(raf){cancelAnimationFrame(raf);raf=null;}}
function loop(ts){
  if(t0===null) t0=ts;
  const dt=(ts-t0)/1000;
  const p=cycle(dt,3);
  if(anim.squat) drawSquat(p);
  if(anim.bench) drawBench(p);
  if(anim.deadlift) drawDead(p);
  if(anim.squat||anim.bench||anim.deadlift) raf=requestAnimationFrame(loop); else {cancelAnimationFrame(raf);raf=null;}
}

// init
drawSquat(0);
</script>
</body>
</html>
